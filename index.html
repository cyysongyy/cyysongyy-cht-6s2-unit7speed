<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>六年級數學｜速率單元小測驗（選擇＋填充＋應用）</title>
  <style>
body{ font-family: "Noto Sans TC", "PingFang TC", "Heiti TC", "Microsoft JhengHei", sans-serif; }
    :root{
      --bg: #f6f8fb;
      --card:#ffffff;
      --ink:#1f2a37;
      --muted:#6b7280;
      --primary:#2563eb;
      --primary-weak:#e8f0ff;
      --good:#16a34a;
      --bad:#dc2626;
      --radius:18px;
    }
    *{box-sizing:border-box; font-family: system-ui, "Noto Sans TC", "Microsoft JhengHei", sans-serif;}
    body{margin:0; background:var(--bg); color:var(--ink);}
    header{
      position:sticky; top:0; z-index:10;
      background:linear-gradient(90deg,#c7d2fe,#dbeafe,#bae6fd);
      padding:14px 16px; border-bottom:1px solid #e5e7eb;
    }
    header .title{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.5px;}
    header .badge{
      background:#0ea5e9; color:white; font-weight:700;
      padding:4px 10px; border-radius:999px; font-size:13px;
      box-shadow:0 4px 10px rgba(14,165,233,.25);
    }
    main{max-width:1020px; margin:0 auto; padding:16px;}
    .intro{
      background:var(--card); border-radius:var(--radius);
      padding:14px; margin-bottom:12px; display:flex; gap:12px; align-items:center;
      box-shadow:0 6px 18px rgba(31,42,55,.06);
    }
    .intro .text{font-size:15px; color:var(--muted); line-height:1.6;}
    .section-title{
      margin:12px 2px 8px; font-weight:900; letter-spacing:.5px;
      display:flex; align-items:center; gap:8px;
    }
    .section-title .tag{
      font-size:12px; font-weight:900; background:#111827; color:#fff; padding:4px 8px; border-radius:999px;
    }
    .grid{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap:12px;
    }
    .card{
      background:var(--card); border-radius:var(--radius);
      padding:12px; box-shadow:0 6px 18px rgba(31,42,55,.06);
      border:1px solid #eef2f7;
    }
    .card .head{
      display:flex; align-items:center; gap:10px; margin-bottom:6px;
    }
    .pill{
      font-size:12px; font-weight:800; color:#0f172a; background:var(--primary-weak);
      padding:4px 8px; border-radius:999px;
    }
    .qtext{font-size:16px; font-weight:700; line-height:1.5; margin:6px 0 8px;}
    .options{display:grid; gap:6px;}
    label.option{
      display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:12px;
      border:1px solid #e5e7eb; cursor:pointer; transition:.15s ease;
      background:#fff;
    }
    label.option:hover{border-color:#cbd5e1; transform:translateY(-1px);}
    input[type="radio"]{transform:scale(1.1);}
    .blank-row{
      display:flex; align-items:center; gap:8px; margin-top:6px; flex-wrap:wrap;
    }
    .blank-row input[type="text"]{
      width:130px; padding:8px 10px; border-radius:10px; border:1px solid #e5e7eb; font-size:15px;
      outline:none;
    }
    .blank-row input[type="text"]:focus{
      border-color:#93c5fd; box-shadow:0 0 0 3px rgba(147,197,253,.35);
    }
    .unit{
      font-size:14px; color:var(--muted); font-weight:700;
      background:#f1f5f9; padding:4px 8px; border-radius:999px;
    }
    .footer{
      margin-top:14px; display:flex; flex-wrap:wrap; gap:8px;
      justify-content:space-between; align-items:center;
    }
    button{
      appearance:none; border:none; cursor:pointer; font-weight:800; letter-spacing:.3px;
      padding:10px 14px; border-radius:12px;
      background:var(--primary); color:white; box-shadow:0 6px 14px rgba(37,99,235,.25);
      transition:.15s ease;
    }
    button:hover{transform:translateY(-1px); filter:brightness(1.05);}
    button.secondary{
      background:#0f172a; box-shadow:0 6px 14px rgba(15,23,42,.18);
    }
    .score{
      font-weight:800; font-size:16px;
      background:#ecfeff; border:1px dashed #a5f3fc; padding:8px 10px; border-radius:12px;
    }
    .explain{
      display:none; margin-top:8px; padding:8px 10px; border-radius:12px;
      font-size:14px; line-height:1.6;
      background:#f8fafc; border:1px solid #e5e7eb; color:#111827;
    }
    .explain.good{border-color:#bbf7d0; background:#f0fdf4;}
    .explain.bad{border-color:#fecaca; background:#fef2f2;}
    .legend{
      margin-top:10px; font-size:13px; color:var(--muted);
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
    }
    .legend .dot{width:10px;height:10px;border-radius:50%;}
    .dot.good{background:var(--good);}
    .dot.bad{background:var(--bad);}
    .icon{width:44px; height:44px; flex:0 0 auto;}
    .icon.small{width:36px; height:36px;}
  </style>
</head>
<body>
<header>
  <div class="title">
    <span class="badge">六年級下</span>
    <span>速率單元小測驗（選擇題＋填充題＋應用題）</span>
  </div>
</header>

<main>
  <section class="intro">
    <!-- Friendly mascot: a smiling turtle with a speed meter (SVG) -->
    <svg class="icon" viewBox="0 0 64 64" aria-hidden="true">
      <defs>
        <linearGradient id="g1" x1="0" x2="1">
          <stop offset="0" stop-color="#86efac"/>
          <stop offset="1" stop-color="#34d399"/>
        </linearGradient>
      </defs>
      <circle cx="32" cy="32" r="30" fill="url(#g1)" opacity=".2"/>
      <ellipse cx="30" cy="38" rx="18" ry="12" fill="#22c55e"/>
      <circle cx="18" cy="32" r="8" fill="#16a34a"/>
      <circle cx="44" cy="32" r="8" fill="#16a34a"/>
      <circle cx="26" cy="36" r="2.5" fill="#0f172a"/>
      <circle cx="34" cy="36" r="2.5" fill="#0f172a"/>
      <path d="M26 42 Q30 45 34 42" stroke="#0f172a" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M42 14 A10 10 0 0 1 62 14" stroke="#0ea5e9" stroke-width="3" fill="none" stroke-linecap="round"/>
      <line x1="52" y1="14" x2="57" y2="6" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round"/>
    </svg>
    <div class="text">
      Part A：四選一；Part B、C：填充題（只要輸入數字）。<br/>
      做完按「交卷」看分數與解析。
    </div>
  </section>

  <div class="section-title"><span class="tag">Part A</span> 選擇題（共 8 題）</div>
  <section id="mcquiz" class="grid"></section>

  <div class="section-title" style="margin-top:18px;"><span class="tag">Part B</span> 填充題（共 10 題）</div>
  <section id="blankquiz" class="grid"></section>

  <div class="section-title" style="margin-top:18px;"><span class="tag">Part C</span> 應用題（共 5 題）</div>
  <section id="appquiz" class="grid"></section>

  <div class="footer">
    <div id="scoreBox" class="score">目前分數：—</div>
    <div>
      <button id="submitBtn">交卷</button>
      <button id="resetBtn" class="secondary">重來一次</button>
    </div>
  </div>

  <div class="legend">
    <span class="dot good"></span><span>答對會顯示綠色說明</span>
    <span class="dot bad"></span><span>答錯會顯示紅色說明</span>
  </div>
</main>

<script>
const mcQuestions = [
  { id:"q1", strand:"7-1 時間換算", icon:"stopwatch",
    text:"30 分鐘等於多少秒？",
    options:[{k:"A",t:"300 秒"},{k:"B",t:"1800 秒"},{k:"C",t:"3600 秒"},{k:"D",t:"30 秒"}],
    answer:"B", explain:"1 分鐘 = 60 秒，所以 30 × 60 = 1800 秒。"
  },
  { id:"q2", strand:"7-1 時間換算", icon:"clock",
    text:"1.5 小時等於多少分鐘？",
    options:[{k:"A",t:"45 分"},{k:"B",t:"60 分"},{k:"C",t:"75 分"},{k:"D",t:"90 分"}],
    answer:"D", explain:"1 小時 = 60 分鐘，1.5 小時 = 60 × 1.5 = 90 分鐘。"
  },
  { id:"q3", strand:"7-2 秒速、分速、時速", icon:"runner",
    text:"小明跑步每秒 2 公尺，他 1 分鐘可以跑多遠？",
    options:[{k:"A",t:"12 公尺"},{k:"B",t:"60 公尺"},{k:"C",t:"120 公尺"},{k:"D",t:"240 公尺"}],
    answer:"C", explain:"1 分鐘 = 60 秒，距離 = 2 × 60 = 120 公尺。"
  },
  { id:"q4", strand:"7-2 秒速、分速、時速", icon:"bike",
    text:"一台腳踏車 1 小時騎 12 公里，它的分速是多少？",
    options:[{k:"A",t:"0.2 公里/分"},{k:"B",t:"0.5 公里/分"},{k:"C",t:"1 公里/分"},{k:"D",t:"12 公里/分"}],
    answer:"A", explain:"1 小時 = 60 分鐘，12 ÷ 60 = 0.2 公里/分。"
  },
  { id:"q5", strand:"7-3 速度單位換算", icon:"car",
    text:"60 公里/小時換成公尺/秒約是多少？",
    options:[{k:"A",t:"10 m/s"},{k:"B",t:"12 m/s"},{k:"C",t:"16 m/s"},{k:"D",t:"20 m/s"}],
    answer:"C", explain:"60 km/h = 60000 m ÷ 3600 s ≈ 16.7 m/s，最接近 16 m/s。"
  },
  { id:"q6", strand:"7-3 速度單位換算", icon:"meter",
    text:"300 公尺/分換成公尺/秒是多少？",
    options:[{k:"A",t:"2 m/s"},{k:"B",t:"3 m/s"},{k:"C",t:"5 m/s"},{k:"D",t:"10 m/s"}],
    answer:"C", explain:"1 分鐘 = 60 秒，300 ÷ 60 = 5 m/s。"
  },
  { id:"q7", strand:"7-4 速率的應用", icon:"road",
    text:"一輛車以 80 公里/小時行駛，從甲地到乙地需要 2 小時。甲乙兩地相距多少公里？",
    options:[{k:"A",t:"40 km"},{k:"B",t:"80 km"},{k:"C",t:"120 km"},{k:"D",t:"160 km"}],
    answer:"D", explain:"距離 = 速率 × 時間 = 80 × 2 = 160 公里。"
  },
  { id:"q8", strand:"7-4 速率的應用", icon:"map",
    text:"步道全長 900 公尺，小華以每分鐘 75 公尺的速度行走。走完全程需要多久？",
    options:[{k:"A",t:"6 分鐘"},{k:"B",t:"10 分鐘"},{k:"C",t:"12 分鐘"},{k:"D",t:"15 分鐘"}],
    answer:"C", explain:"時間 = 距離 ÷ 速率 = 900 ÷ 75 = 12 分鐘。"
  }
];

const blankQuestions = [
  { id:"b1", strand:"7-1 時間換算", icon:"stopwatch",
    text:"2 分 30 秒 = ____ 秒", answer:150, unit:"秒",
    explain:"2 分 = 120 秒，再加 30 秒，共 150 秒。"
  },
  { id:"b2", strand:"7-1 時間換算", icon:"clock",
    text:"0.25 小時 = ____ 分鐘", answer:15, unit:"分鐘",
    explain:"0.25 小時 = 1/4 小時，60 × 1/4 = 15 分。"
  },
  { id:"b3", strand:"7-2 秒速、分速、時速", icon:"runner",
    text:"每秒 3 公尺，跑 20 秒共 ____ 公尺", answer:60, unit:"公尺",
    explain:"距離 = 3 × 20 = 60 公尺。"
  },
  { id:"b4", strand:"7-2 秒速、分速、時速", icon:"bike",
    text:"每分鐘 90 公尺，走 8 分鐘共 ____ 公尺", answer:720, unit:"公尺",
    explain:"距離 = 90 × 8 = 720 公尺。"
  },
  { id:"b5", strand:"7-3 速度單位換算", icon:"car",
    text:"36 公里/小時 = ____ 公尺/秒", answer:10, unit:"m/s",
    explain:"36 km/h = 36000 ÷ 3600 = 10 m/s。"
  },
  { id:"b6", strand:"7-3 速度單位換算", icon:"meter",
    text:"5 公尺/秒 = ____ 公尺/分", answer:300, unit:"公尺/分",
    explain:"1 分 = 60 秒，5 × 60 = 300 公尺/分。"
  },
  { id:"b7", strand:"7-3 速度單位換算", icon:"road",
    text:"120 公尺/分 = ____ 公尺/秒", answer:2, unit:"m/s",
    explain:"120 ÷ 60 = 2 m/s。"
  },
  { id:"b8", strand:"7-4 速度應用", icon:"map",
    text:"距離 450 公尺，速率 50 公尺/分，時間 = ____ 分", answer:9, unit:"分鐘",
    explain:"時間 = 450 ÷ 50 = 9 分。"
  },
  { id:"b9", strand:"7-4 速度應用", icon:"car",
    text:"速率 6 公里/小時，走 3 小時距離 = ____ 公里", answer:18, unit:"公里",
    explain:"距離 = 6 × 3 = 18 公里。"
  },
  { id:"b10", strand:"7-4 速度應用", icon:"runner",
    text:"距離 1.2 公里，時間 10 分鐘，分速 = ____ 公里/分", answer:0.12, unit:"公里/分",
    explain:"分速 = 1.2 ÷ 10 = 0.12 公里/分。"
  }
];

const appQuestions = [
  { id:"c1", strand:"應用｜距離÷速率", icon:"road",
    text:"小華步行速率每分鐘 80 公尺，從家到公園 1200 公尺，需要 ____ 分鐘。", answer:15, unit:"分鐘",
    explain:"時間 = 距離 ÷ 速率 = 1200 ÷ 80 = 15 分。"
  },
  { id:"c2", strand:"應用｜速率×時間", icon:"car",
    text:"一台車以 90 公里/小時行駛，行駛 2.5 小時，距離是 ____ 公里。", answer:225, unit:"公里",
    explain:"距離 = 速率 × 時間 = 90 × 2.5 = 225 公里。"
  },
  { id:"c3", strand:"應用｜秒速", icon:"pool",
    text:"游泳池長 50 公尺，小明每秒游 1.5 公尺，游完全程要 ____ 秒。", answer:50/1.5, unit:"秒",
    explain:"時間 = 50 ÷ 1.5 = 33.333... 秒（約 33.3 秒）。"
  },
  { id:"c4", strand:"應用｜分速", icon:"bike",
    text:"自行車每分鐘騎 450 公尺，騎 15 分鐘，共騎 ____ 公尺。", answer:6750, unit:"公尺",
    explain:"距離 = 450 × 15 = 6750 公尺。"
  },
  { id:"c5", strand:"應用｜平均速率", icon:"runner",
    text:"跑道 400 公尺，小美用 80 秒跑完，平均速率 ____ 公尺/秒。", answer:5, unit:"公尺/秒",
    explain:"平均速率 = 400 ÷ 80 = 5 公尺/秒。"
  }
];

// --- Cute mini illustrations (simple SVGs) ---
function iconSVG(name){
  switch(name){
    case "stopwatch":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="32" cy="34" r="20" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="3"/>
        <rect x="26" y="6" width="12" height="8" rx="2" fill="#0ea5e9"/>
        <rect x="30" y="12" width="4" height="6" rx="2" fill="#0f172a"/>
        <line x1="32" y1="34" x2="32" y2="22" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
        <line x1="32" y1="34" x2="44" y2="34" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
        <circle cx="32" cy="34" r="2.5" fill="#0f172a"/>
      </svg>`;
    case "clock":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="32" cy="32" r="22" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
        <line x1="32" y1="32" x2="32" y2="18" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
        <line x1="32" y1="32" x2="42" y2="36" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
        <circle cx="32" cy="32" r="2.5" fill="#0f172a"/>
      </svg>`;
    case "runner":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="40" cy="12" r="6" fill="#fbbf24"/>
        <path d="M28 24 L40 18 L46 28 L36 30 Z" fill="#60a5fa"/>
        <path d="M22 40 L34 30" stroke="#0f172a" stroke-width="4" stroke-linecap="round"/>
        <path d="M30 44 L46 40" stroke="#0f172a" stroke-width="4" stroke-linecap="round"/>
        <path d="M20 28 L32 30" stroke="#0f172a" stroke-width="4" stroke-linecap="round"/>
      </svg>`;
    case "bike":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="18" cy="42" r="10" fill="none" stroke="#0f172a" stroke-width="3"/>
        <circle cx="46" cy="42" r="10" fill="none" stroke="#0f172a" stroke-width="3"/>
        <path d="M18 42 L28 24 L38 42 L28 42 Z" fill="none" stroke="#2563eb" stroke-width="3"/>
        <line x1="28" y1="24" x2="42" y2="24" stroke="#2563eb" stroke-width="3" stroke-linecap="round"/>
        <line x1="42" y1="24" x2="46" y2="42" stroke="#2563eb" stroke-width="3" stroke-linecap="round"/>
      </svg>`;
    case "car":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <rect x="12" y="28" width="40" height="12" rx="6" fill="#a7f3d0" stroke="#10b981" stroke-width="3"/>
        <rect x="20" y="20" width="24" height="10" rx="4" fill="#34d399"/>
        <circle cx="22" cy="44" r="6" fill="#0f172a"/>
        <circle cx="42" cy="44" r="6" fill="#0f172a"/>
      </svg>`;
    case "meter":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <rect x="10" y="20" width="44" height="24" rx="8" fill="#e9d5ff" stroke="#8b5cf6" stroke-width="3"/>
        <line x1="20" y1="32" x2="44" y2="32" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
        <line x1="32" y1="32" x2="44" y2="24" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
        <circle cx="32" cy="32" r="2.5" fill="#0f172a"/>
      </svg>`;
    case "road":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <rect x="22" y="8" width="20" height="48" rx="6" fill="#cbd5e1"/>
        <line x1="32" y1="14" x2="32" y2="50" stroke="#f8fafc" stroke-width="3" stroke-dasharray="6 6"/>
      </svg>`;
    case "map":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <path d="M10 14 L26 10 L38 14 L54 10 L54 50 L38 54 L26 50 L10 54 Z"
              fill="#fde68a" stroke="#f59e0b" stroke-width="3"/>
        <circle cx="24" cy="30" r="4" fill="#ef4444"/>
        <path d="M24 30 Q30 22 40 30 T52 30" fill="none" stroke="#0f172a" stroke-width="2"/>
      </svg>`;
    case "pool":
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <rect x="8" y="18" width="48" height="28" rx="10" fill="#bae6fd" stroke="#0ea5e9" stroke-width="3"/>
        <path d="M12 32 Q18 28 24 32 T36 32 T48 32 T60 32" fill="none" stroke="#0284c7" stroke-width="3"/>
      </svg>`;
    default:
      return `<svg class="icon small" viewBox="0 0 64 64" aria-hidden="true">
        <circle cx="32" cy="32" r="18" fill="#e5e7eb"/>
      </svg>`;
  }
}

const mcEl = document.getElementById("mcquiz");
const blankEl = document.getElementById("blankquiz");
const appEl = document.getElementById("appquiz");

// --- render multiple-choice ---
function renderMC(){
  mcEl.innerHTML = "";
  mcQuestions.forEach((q, idx)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="head">
        ${iconSVG(q.icon)}
        <div>
          <div class="pill">${q.strand}</div>
          <div style="font-size:13px;color:#6b7280;margin-top:2px;">第 ${idx+1} 題</div>
        </div>
      </div>
      <div class="qtext">${q.text}</div>
      <div class="options">
        ${q.options.map(o=>`
          <label class="option">
            <input type="radio" name="${q.id}" value="${o.k}">
            <span><b>${o.k}.</b> ${o.t}</span>
          </label>
        `).join("")}
      </div>
      <div id="${q.id}-exp" class="explain"></div>
    `;
    mcEl.appendChild(card);
  });
}

// --- render blanks/app ---
function renderBlanks(list, el, labelPrefix){
  el.innerHTML = "";
  list.forEach((q, idx)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="head">
        ${iconSVG(q.icon)}
        <div>
          <div class="pill">${q.strand}</div>
          <div style="font-size:13px;color:#6b7280;margin-top:2px;">${labelPrefix} ${idx+1} 題</div>
        </div>
      </div>
      <div class="qtext">${q.text}</div>
      <div class="blank-row">
        <input type="text" inputmode="decimal" placeholder="輸入答案" id="${q.id}-input">
        <span class="unit">${q.unit}</span>
      </div>
      <div id="${q.id}-exp" class="explain"></div>
    `;
    el.appendChild(card);
  });
}

// normalize numeric text (allow commas/spaces)
function parseNumber(v){
  if(v==null) return NaN;
  const t = String(v).replace(/,/g,"").trim();
  if(t==="") return NaN;
  return Number(t);
}
function nearlyEqual(a,b){
  if(Number.isNaN(a) || Number.isNaN(b)) return false;
  return Math.abs(a-b) < 1e-6;
}

// --- grade all ---
function grade(){
  let correct = 0;
  const total = mcQuestions.length + blankQuestions.length + appQuestions.length;

  // MC
  mcQuestions.forEach(q=>{
    const chosen = document.querySelector(`input[name="${q.id}"]:checked`);
    const expEl = document.getElementById(`${q.id}-exp`);
    expEl.style.display = "block";
    if(chosen && chosen.value === q.answer){
      correct++;
      expEl.className = "explain good";
      expEl.innerHTML = `✅ 答對了！<br>${q.explain}`;
    }else{
      expEl.className = "explain bad";
      const your = chosen ? chosen.value : "未作答";
      const rightText = q.options.find(o=>o.k===q.answer).t;
      expEl.innerHTML = `❌ 你的答案：${your}<br>✅ 正確答案：${q.answer}. ${rightText}<br>${q.explain}`;
    }
  });

  // blanks + apps
  function gradeBlankSet(set){
    set.forEach(q=>{
      const inputEl = document.getElementById(`${q.id}-input`);
      const expEl = document.getElementById(`${q.id}-exp`);
      expEl.style.display = "block";

      const yourNum = parseNumber(inputEl.value);
      const ansNum = q.answer;

      if(nearlyEqual(yourNum, ansNum)){
        correct++;
        expEl.className = "explain good";
        expEl.innerHTML = `✅ 答對了！<br>${q.explain}`;
      }else{
        expEl.className = "explain bad";
        const yourText = (inputEl.value||"未作答").trim() || "未作答";
        // show rounded answer for repeating decimals
        const showAns = (Math.abs(ansNum - Math.round(ansNum)) < 1e-9) ? ansNum : ansNum.toFixed(3);
        expEl.innerHTML = `❌ 你的答案：${yourText}<br>✅ 正確答案：${showAns} ${q.unit}<br>${q.explain}`;
      }
    });
  }
  gradeBlankSet(blankQuestions);
  gradeBlankSet(appQuestions);

  document.getElementById("scoreBox").textContent = `你的分數：${correct} / ${total}`;
}

function resetQuiz(){
  document.querySelectorAll('input[type="radio"]').forEach(i=>i.checked=false);
  [...blankQuestions, ...appQuestions].forEach(q=>{
    const inputEl = document.getElementById(`${q.id}-input`);
    if(inputEl) inputEl.value="";
  });
  document.querySelectorAll(".explain").forEach(e=>{
    e.style.display="none";
    e.className="explain";
    e.innerHTML="";
  });
  document.getElementById("scoreBox").textContent = "目前分數：—";
  window.scrollTo({top:0, behavior:"smooth"});
}

document.getElementById("submitBtn").addEventListener("click", grade);
document.getElementById("resetBtn").addEventListener("click", resetQuiz);

renderMC();
renderBlanks(blankQuestions, blankEl, "填充第");
renderBlanks(appQuestions, appEl, "應用第");
</script>
</body>
</html>
